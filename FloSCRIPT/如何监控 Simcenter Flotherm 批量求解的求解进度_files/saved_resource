(function(w, d, ls){ var c = d.currentScript; var aC = c && c.getAttribute('data-custom-sdk') !== null; var aE = c && (c.getAttribute('data-eu-mode') === true || c.getAttribute('data-eu-mode') === 'true'); var aV = c && c.getAttribute('data-version') ? c.getAttribute('data-version') : 'latest'; var aL = c && c.getAttribute('data-language') ? c.getAttribute('data-language') : ''; var aTv = c && c.getAttribute('data-tcf-vendors') ? c.getAttribute('data-tcf-vendors') : ''; var u = d.createElement('script'); u.src = aE ? 'https://app.eu.usercentrics.eu/browser-ui/latest/loader.js' : 'https://app.usercentrics.eu/browser-ui/latest/loader.js'; u.setAttribute('id','usercentrics-cmp'); u.setAttribute('data-settings-id', 'GXj83XOdm'); u.setAttribute('data-version', aV); u.setAttribute('data-language', aL); if(aE) { u.setAttribute('data-eu-mode', 'true'); } w.addEventListener('UC_SDK_EVENT', function (event) { if(!ls.getItem('uc_settings') || !event.detail || event.detail.action === 'onInitialPageLoad' || event.detail.event !== 'consent_status') { return; } w.setTimeout(function () { var d = new URL(w.location.href).hostname; var x = new XMLHttpRequest(); x.onreadystatechange = function () { if (x.readyState === XMLHttpRequest.DONE) { var event = new w.CustomEvent('itp_consent_save_finished'); w.dispatchEvent(event); } }; var tvf = aTv ? '&tcfvendors=1' : ''; x.open('POST', 'https://data.cdn.siemens.com/set?h=' + encodeURIComponent(d) + tvf, true); x.setRequestHeader('Content-type', 'application/json'); x.withCredentials = true; x.send(JSON.stringify({uc_settings: JSON.parse(ls.getItem('uc_settings')), uc_tcf: JSON.parse(ls.getItem('uc_tcf') || null)})); }, 200); }); if (!aC) { d.head.appendChild(u); }})(window, document, localStorage);
